<link rel="import" href="../element.html">
<link rel="import" href="icon-set.html">
<link rel="import" href="standard-set.html">

<template id="magnon-icon">
    <style>
        :host {
            display: inline-block;
            width: var(--magnon-icon-size, 16px);
            height: var(--magnon-icon-size, 16px);
        }

        svg {
            fill: var(--magnon-icon-color, black);
        }
    </style>

    <svg width="100%" height="100%" viewBox="0 0 16 16"></svg>
</template>

<script>
    /* globals MagnonElement, MagnonIconSet */
    class MagnonIcon extends MagnonElement {
        static get name() {
            return "magnon-icon";
        }

        static get propertyAttributes() {
            return {
                string: ["icon"]
            };
        }

        constructor() {
            super();

            this._svg = this.root.querySelector("svg");
        }

        propertySet(property, old, value) {
            if (property === "icon") {
                const separatorIndex = value.indexOf("-");
                const setName = separatorIndex < 0 ? "standard" : value.substring(0, separatorIndex);
                const iconName = value.substring(separatorIndex + 1);

                this.changeIcon(setName, iconName);
            }
        }

        changeIcon(set, icon) {
            this._emptySvg();

            this._svg.appendChild(MagnonIconSet.getSet(set).getIcon(icon));
        }

        _emptySvg() {
            while (this._svg.children[0]) {
                this._svg.removeChild(this._svg.children[0]);
            }
        }
    }

    MagnonIcon.init();
</script>
