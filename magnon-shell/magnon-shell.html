<link rel="import" href="../element.html">
<link rel="import" href="../magnon-icon-button/magnon-icon-button.html">
<link rel="import" href="../magnon-logo/magnon-logo.html">
<link rel="import" href="../magnon-drawer/magnon-drawer.html">
<link rel="import" href="../magnon-styles/magnon-styles.html">

<template id="magnon-shell">
    <style>
        :host {
            position: fixed;
            top: 0; right: 0; bottom: 0; left: 0;
            width: 100vw;
            height: 100vh;

            font-family: var(--magnon-font);

            --magnon-header-height: 50px;
        }

        #header-container {
            position: absolute;
            top: 0; right: 0; bottom: 0; left: 0;
            display: flex;
            width: 100%;
            height: var(--magnon-header-height);

            justify-content: center;

            padding: 5px;
            box-sizing: border-box;

            background: var(--magnon-shell-color, var(--magnon-normal-blue));
            color: white;
        }

        #navigation-button {
            margin-right: auto;
            --magnon-icon-button-padding: 5px;
            --magnon-icon-color: white;
            --magnon-icon-size: 30px;
        }

        magnon-logo {
            position: absolute;
            margin: auto;
            height: 40px;
        }

        #content-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            margin: calc(var(--magnon-header-height) + 20px) auto 0 auto;
            width: 70vw;
        }

        #content-container.expand-content {
            width: 100vw;
            margin-top: var(--magnon-header-height);
        }
    </style>

    <div id="header-container">
        <magnon-icon-button id="navigation-button" icon="menu"></magnon-icon-button>
        <magnon-logo animate></magnon-logo>
    </div>

    <magnon-drawer>
        <slot name="sub-navigation"></slot>
    </magnon-drawer>

    <div id="content-container">
        <slot name="content"></slot>
    </div>

    <div id="footer">

    </div>
</template>

<script>
    /* globals MagnonElement */
    class MagnonShell extends MagnonElement {
        constructor() {
            super();

            this._drawer = this.root.querySelector("magnon-drawer");
            this._content = this.root.querySelector("#content-container");
        }

        connectedCallback() {
            this.root.querySelector("magnon-icon-button").addEventListener("click", () => {
                this._drawer.open = !this._drawer.open;
            });
        }

        static get name() {
            return "magnon-shell";
        }

        static get observedAttributes() {
            return ["expand-content"];
        }

        attributeChangedCallback(attribute, old, value) {
            if (attribute === "expand-content") {
                if (this.hasAttribute("expand-content")) this._content.classList.add("expand-content");
                else this._content.classList.remove("expand-content");
            }
        }
    }

    MagnonShell.init();
</script>
