<link rel="import" href="../element.html">
<link rel="import" href="../magnon-styles/magnon-styles.html">

<template id="magnon-card">
    <style>
        :host {
            display: block;

            --card-padding: 30px;

            margin-top: 50px;
            margin-bottom: 30px;
        }

        #card {
            position: relative;
            display: flex;
            flex-direction: column;

            max-width: 100%;
            min-height: 100%;

            padding: var(--card-padding);
            padding-top: 70px;
            box-sizing: border-box;

            background: var(--magnon-card-background, var(--magnon-content-background));
            color: var(--magnon-content-color);

            box-shadow: var(--magnon-shadow-2);
            transition: 0.5s box-shadow;
        }

        #card.shadow {
            box-shadow: none;
        }

        #title {
            position: absolute;
            top: -25px;
            left: 10px;
            background: inherit;
            box-shadow: var(--magnon-shadow-2);
            padding: 15px 30px;
            height: 30px;
            width: calc(100% - 80px);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #content {
            flex-grow: 1;
        }

        #footer {
            margin-top: var(--card-padding);
        }

        #title ::slotted(h1) { margin: 0; } #title ::slotted(h2) { margin: 0; }
        #title ::slotted(h3) { margin: 0; } #title ::slotted(h4) { margin: 0; }
        #title ::slotted(h5) { margin: 0; } #title ::slotted(h6) { margin: 0; }

        @media(min-width: 580px) {
            #card {
                border-radius: 4px;
            }

            #title {
                left: auto;
                width: auto;
            }
        }
    </style>

    <div id="card">
        <div id="title">
            <slot name="title"></slot>
        </div>
        <div id="content">
            <slot></slot>
        </div>
        <div id="footer">
            <slot name="footer"></slot>
        </div>
    </div>
</template>

<script>
    /* globals MagnonElement */
    class MagnonCard extends MagnonElement {
        constructor() {
            super();

            this._card = this.root.querySelector("#card");
        }

        static get name() {
            return "magnon-card";
        }

        static get propertyAttributes() {
            return {
                number: ["shadow"]
            };
        }

        propertySet(property, old, value) {
            if (property === "shadow") {
                const clamped = Math.min(3, Math.max(0, value));

                this._card.style.boxShadow = `var(--magnon-shadow-${clamped})`;
            }
        }
    }

    MagnonCard.init();
</script>
